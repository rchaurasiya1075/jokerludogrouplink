<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">ðŸ”§ Admin Panel</h1>
    
    <div id="groupsList" class="space-y-4">
      <!-- Admin groups load here -->
    </div>
  </div>

  <!-- Firebase + Auth -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  
  <script>
  const firebaseConfig = { /* Same config */ };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const ADMIN_EMAIL = "rchaurasiyaself@gmail.com";
  
  auth.onAuthStateChanged(user => {
    if (!user || user.email !== ADMIN_EMAIL) window.location.href = 'login.html';
    else loadAdminGroups();
  });
  
  async function loadAdminGroups() {
    const groupsList = document.getElementById('groupsList');
    const snapshot = await db.collection('Groups').orderBy('timestamp', 'desc').get();
    
    groupsList.innerHTML = snapshot.empty ? '<p>No groups</p>' : '';
    
    snapshot.forEach(doc => {
      const group = doc.data();
      const div = document.createElement('div');
      div.className = 'bg-white p-6 rounded-lg shadow';
      div.innerHTML = `
        <h3 class="font-bold text-xl">${group.name}</h3>
        <p>${group.link}</p>
        <p>Type: ${group.type}</p>
        <div class="flex gap-2 mt-4">
          <button onclick="editGroup('${doc.id}')" class="bg-blue-500 text-white px-4 py-2 rounded">Edit</button>
          <button onclick="deleteGroup('${doc.id}')" class="bg-red-500 text-white px-4 py-2 rounded">Delete</button>
        </div>
      `;
      groupsList.appendChild(div);
    });
  }
  
  window.deleteGroup = async id => {
    if (confirm('Delete this group?')) {
      await db.collection('Groups').doc(id).delete();
      loadAdminGroups();
    }
  };
  
  window.editGroup = id => {
    const newLink = prompt('Edit link:');
    if (newLink) {
      db.collection('Groups').doc(id).update({ link: newLink });
      loadAdminGroups();
    }
  };
  </script>
</body>
</html>
